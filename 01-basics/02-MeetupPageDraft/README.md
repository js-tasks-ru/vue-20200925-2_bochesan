# Meetup Page Draft

В целом, страница митапа похожа на страницу списка митапов, которую мы разбирали на вебинаре. 

Данные приложения - только объект митапа. В шаблоне используются выражения, директивы v-for и v-if для циклов и условий. В нескольких местах требуется привязка данных к аттрибутам. Не нужно обрабатывать события или работать с формами.

Однако пара проблемных мест всё-таки есть...

## Получение данных митапа

Первое, что требуется сделать -- получить данные митапа.

В отличие от примера на вебинаре со списком митапов, который можно изначально инициализировать с пустым списком [], т.е. значением того же типа, здесь нельзя как-то инициализировать митап изначально. Корректное решение будет инициализировать с `null`.

Но в этом случае в консоли можно будет увидеть большой список ошибок. Например, в шаблоне выводится `meetup.title`, что приведёт к `Cannot read property 'title' of null`, когда митап ещё не загружен.

Достаточно обернуть всю страницу в `<template v-if="meetup">` и не рендерить страницу, пока митапа нет. 

## Картинка митапа, дата, иконки и заголовки пунктов программы

Ещё одна проблема возникает с тем, что в шаблоне требуется выводить то, чего нет в объекте с описанием митапа, который пришёл с API:
- URL адрес картинки
- Локализованная дата
- Иконки пунктов меню
- Заголовки пунктов меню

### Решение #1.1

Для всех 4-х случаев можно создать отдельно вычисляемое свойство, которое вернёт нужные для шаблона данные.

Для картинки и даты свойство будет вычисляться из данных митапа.

А для иконок и заголовков вычисляемое свойство будет просто возвращать уже существующий в скрипте объект.

*Примечание: в шаблоне доступны свойства Vue приложения (корневого компонента). Но не доступны любые глобальные переменные* 

```javascript
new Vue({
  //...
  computed: {  
    meetupCover() {
      return this.meetup.imageId ? getMeetupCoverLink(this.meetup) : null;
    },
      
    agendaItemTitles() {
      return agendaItemTitles;
    }

    // + localDate, agendaItemIcons
  }
});
``` 

```html
<h5 class="meetup-agenda__title">
    {{ agendaItem.title || agendaItemTitles[agendaItem.type] }}
</h5>
<time :datetime="meetup.date">{{ localDate }}</time>
```

### Решение #1.2

Хотя `computed` часто используют для того, чтобы добавить что-то извне в компонент, это не совсем логично. Ведь в этом случае вычисляемое свойство не реактивное, так как не зависит от каких-либо реактивных свойств.

Альтернативный вариант - положить `agendaItemTitles` и `agendaItemIcons` в опции компонента и получать из `$options`.

### Решение #2

Можно создать вычисляемое свойство, которое возвращает новый объект с митапом, добавив сразу всё необходимое (`script.js` в решении).

### Решение #3

Если мы уверены, чтобы данные митапа никогда не будут изменяться, мы можем заменить их сразу, когда получили с API, вместо создания вычисляемого свойства. 

Выбор между 2 и 3 решением зависит от возможности изменять данные и согласованности контрактов в приложении.
